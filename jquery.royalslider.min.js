/*
 * RoyalSlider
 *
 * @version 9.2.0:
 *
 * Copyright 2011-2012, Dmitry Semenov
 * 
 */(function(e){function t(t,n){function w(e,t){return'<div style="'+(o._isMove?"":e!==o.currSlideId?"z-index: 0; display:none; opacity: 0; position: absolute;  left: 0; top: 0;":"z-index: 0;  position: absolute; left: 0; top: 0;")+'" class="rsSlide '+(t||"")+'"></div>'}var r=navigator.userAgent.toLowerCase(),i,s=e.browser,o=this,u=s.webkit,a=r.indexOf("android")>-1;o.isIPAD=r.match(/(ipad)/);var f=document.createElement("div").style,l=["webkit","Moz","ms","O"],c="",h=0,p;for(i=0;i<l.length;i++){p=l[i];!c&&p+"Transform"in f&&(c=p);p=p.toLowerCase();if(!window.requestAnimationFrame){window.requestAnimationFrame=window[p+"RequestAnimationFrame"];window.cancelAnimationFrame=window[p+"CancelAnimationFrame"]||window[p+"CancelRequestAnimationFrame"]}}window.requestAnimationFrame||(window.requestAnimationFrame=function(e,t){var n=(new Date).getTime(),r=Math.max(0,16-(n-h)),i=window.setTimeout(function(){e(n+r)},r);h=n+r;return i});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)});o.slider=e(t);o.ev=e({});o._doc=e(document);o.st=e.extend({},e.fn.royalSlider.defaults,n);o._currAnimSpeed=o.st.transitionSpeed;if(o.st.allowCSS3)if(!u||o.st.allowCSS3OnWebkit){var d=c+(c?"T":"t");o._useCSS3Transitions=d+"ransform"in f&&d+"ransition"in f;o._useCSS3Transitions&&(o._use3dTransform=c+(c?"P":"p")+"erspective"in f)}c=c.toLowerCase();o._vendorPref="-"+c+"-";o._slidesHorizontal=o.st.slidesOrientation==="vertical"?!1:!0;o._reorderProp=o._slidesHorizontal?"left":"top";o._sizeProp=o._slidesHorizontal?"width":"height";o._prevNavItemId=-1;o._isMove=o.st.transitionType==="fade"?!1:!0;if(!o._isMove){o.st.sliderDrag=!1;o._fadeZIndex=10}o._newSlideId=0;o._sPosition=0;e.each(e.rsModules,function(e,t){t.call(o)});o.slides=[];o._idCount=0;var v,m=o.st.slides?e(o.st.slides):o.slider.children().detach();m.each(function(){o._parseNode(this,!0)});o.st.randomizeSlides&&o.slides.sort(function(){return.5-Math.random()});o.numSlides=o.slides.length;o._refreshNumPreloadImages();o.st.startSlideId>o.numSlides-1&&(o.st.startSlideId=o.numSlides-1);o.staticSlideId=o.currSlideId=o._realId=o.st.startSlideId;o.currSlide=o.slides[o.currSlideId];o._accelerationPos=0;o.slider.addClass((o._slidesHorizontal?"rsHor":"rsVer")+(o._isMove?"":" rsFade"));var g='<div class="rsOverflow"><div class="rsContainer">';o.slidesSpacing=o.st.slidesSpacing;o._slideSize=(o._slidesHorizontal?o.slider.width():o.slider.height())+o.st.slidesSpacing;o._preload=Boolean(o._numPreloadImages>0);o.numSlides<=1&&(o._loop=!1);var y=o._loop&&o._isMove?o.numSlides===2?1:2:0;o._loopHelpers=y;o._maxImages=o.numSlides<6?o.numSlides:6;o._currBlockIndex=0;o._idOffset=0;o.slidesJQ=[];for(i=0;i<o.numSlides;i++)o.slidesJQ.push(e(w(i)));g+="</div></div>";o.slider.html(g);o._sliderOverflow=o.slider.children(".rsOverflow");o._slidesContainer=o._sliderOverflow.children(".rsContainer");o._preloader=e('<div class="rsPreloader"></div>');var b=o._slidesContainer.children(".rsSlide");o._currHolder=o.slidesJQ[o.currSlideId];o._selectedSlideHolder=0;if("ontouchstart"in window||"createTouch"in document){o.hasTouch=!0;o._downEvent="touchstart.rs";o._moveEvent="touchmove.rs";o._upEvent="touchend.rs";o._cancelEvent="touchcancel.rs";o._lastItemFriction=.5}else{o.hasTouch=!1;o._lastItemFriction=.2;if(o.st.sliderDrag){if(s.msie||s.opera)o._grabCursor=o._grabbingCursor="move";else if(s.mozilla){o._grabCursor="-moz-grab";o._grabbingCursor="-moz-grabbing"}else if(u&&navigator.platform.indexOf("Mac")!=-1){o._grabCursor="-webkit-grab";o._grabbingCursor="-webkit-grabbing"}o._setGrabCursor()}o._downEvent="mousedown.rs";o._moveEvent="mousemove.rs";o._upEvent="mouseup.rs";o._cancelEvent="mouseup.rs"}if(o._useCSS3Transitions){o._TP="transition-property";o._TD="transition-duration";o._TTF="transition-timing-function";o._yProp=o._xProp=o._vendorPref+"transform";if(o._use3dTransform){u&&o.slider.addClass("rsWebkit3d");o._tPref1="translate3d(";o._tPref2="px, ";o._tPref3="px, 0px)"}else{o._tPref1="translate(";o._tPref2="px, ";o._tPref3="px)"}if(!o._isMove){var E={};E[o._vendorPref+o._TP]="opacity";E[o._vendorPref+o._TD]=o.st.transitionSpeed+"ms";E[o._vendorPref+o._TTF]=o.st.css3easeInOut;b.css(E)}else o._slidesContainer[o._vendorPref+o._TP]=o._vendorPref+"transform"}else{o._xProp="left";o._yProp="top"}var S;e(window).on("resize.rs",function(){S&&clearTimeout(S);S=setTimeout(function(){o.updateSliderSize()},50)});o.ev.trigger("rsAfterPropsSetup");o.updateSliderSize();o.st.keyboardNavEnabled&&o._bindKeyboardNav();o.st.arrowsNavHideOnTouch&&o.hasTouch&&(o.st.arrowsNav=!1);if(o.st.arrowsNav){var x="rsArrow",T=o.st.controlsInside?o._sliderOverflow:o.slider;e('<div class="'+x+" "+x+'Left"><div class="'+x+'Icn"></div></div><div class="'+x+" "+x+'Right"><div class="'+x+'Icn"></div></div>').appendTo(T);o._arrowLeft=T.children("."+x+"Left").click(function(e){e.preventDefault();o.prev()});o._arrowRight=T.children("."+x+"Right").click(function(e){e.preventDefault();o.next()});if(o.st.arrowsNavAutoHide&&!o.hasTouch){o._arrowLeft.addClass("rsHidden");o._arrowRight.addClass("rsHidden");var N=T;N.one("mousemove.arrowshover",function(){o._arrowLeft.removeClass("rsHidden");o._arrowRight.removeClass("rsHidden")});N.hover(function(){if(!o._arrowsAutoHideLocked){o._arrowLeft.removeClass("rsHidden");o._arrowRight.removeClass("rsHidden")}},function(){if(!o._arrowsAutoHideLocked){o._arrowLeft.addClass("rsHidden");o._arrowRight.addClass("rsHidden")}})}o.ev.on("rsOnUpdateNav",function(){o._updateArrowsNav()});o._updateArrowsNav()}o._hasDrag=!o.hasTouch&&o.st.sliderDrag||o.hasTouch&&o.st.sliderTouch;o._hasDrag?o._slidesContainer.on(o._downEvent,function(e){o._onDragStart(e)}):o.dragSuccess=!1;var C=["rsPlayBtnIcon","rsPlayBtn","rsCloseVideoBtn","rsCloseVideoIcn"];o._slidesContainer.click(function(t){if(!o.dragSuccess){var n=e(t.target),r=n.attr("class");if(e.inArray(r,C)!==-1&&o.toggleVideo())return!1;if(o.st.navigateByClick&&!o._blockActions){if(e(t.target).closest(".rsNoDrag",o._currHolder).length)return!0;o._mouseNext(t)}}});o.ev.trigger("rsAfterInit")}e.rsModules||(e.rsModules={});t.prototype={_mouseNext:function(e){var t=this,n=e[t._slidesHorizontal?"pageX":"pageY"]-t._sliderOffset;n>0?t.next():t.prev()},_refreshNumPreloadImages:function(){var e=this,t;t=e.st.numImagesToPreload;e._loop=e.st.loop;if(e._loop)if(e.numSlides===2){e._loop=!1;e.st.loopRewind=!0}else e.numSlides<2&&(e.st.loopRewind=e._loop=!1);e._loop&&t>0&&(e.numSlides<=4?t=1:e.st.numImagesToPreload>(e.numSlides-1)/2&&(t=Math.floor((e.numSlides-1)/2)));e._numPreloadImages=t},_parseNode:function(t,n){function a(e,t){u.image=e.attr(t?t:"src");u.caption=t?e.contents():e.attr("alt");u.videoURL=e.attr("data-rsVideo")}var r=this,i,s,o,u={};t=e(t);r._currContent=t;r.ev.trigger("rsBeforeParseNode",[t,u]);if(u.stopParsing)return;t=r._currContent;u.id=r._idCount;u.contentAdded=!1;r._idCount++;if(!u.hasCover){if(t.hasClass("rsImg")){tempEl=t;i=!0}else{tempEl=t.find(".rsImg");tempEl.length&&(i=!0)}if(i){u.bigImage=tempEl.attr("data-rsBigImg");tempEl.is("a")?a(tempEl,"href"):tempEl.is("img")&&a(tempEl)}else if(t.is("img")){t.addClass("rsImg");a(t)}}tempEl=t.find(".rsCaption");tempEl.length&&(u.caption=tempEl.remove());if(!u.image){u.isLoaded=!0;u.isRendered=!1;u.isLoading=!1}u.content=t;r.ev.trigger("rsAfterParseNode",[t,u]);n&&r.slides.push(u);return u},_bindKeyboardNav:function(){var e=this;e._doc.on("keydown.rskb",function(t){if(!e._isDragging&&!e._isAnimating)if(t.keyCode===37){t.preventDefault();e.prev()}else if(t.keyCode===39){t.preventDefault();e.next()}})},goTo:function(e,t){var n=this;e!==n.currSlideId&&n._moveTo(e,n.st.transitionSpeed,!0,!t)},destroy:function(e){var t=this;t.ev.trigger("rsBeforeDestroy");t._doc.off("keydown.rskb "+t._moveEvent+" "+t._upEvent);t._slidesContainer.on(t._downEvent,function(e){t._onDragStart(e)});t.slider.data("royalSlider","");e&&t.slider.remove()},_updateBlocksContent:function(t,n){function N(n,i,s){if(!n.isAdded){s||(s=r.slidesJQ[i]);if(!n.holder){s=r.slidesJQ[i]=e(s);n.holder=s}else s=n.holder;n.appendOnLoaded=!1;k(i,n,s);C(i,n);r._addBlockToContainer(n,s,t);n.isAdded=!0;appended=!0}else{C(i,n);k(i,n)}}function C(e,n){if(!n.contentAdded){r.setItemHtml(n,t);t||(n.contentAdded=!0)}}function k(e,t,n){if(r._isMove){n||(n=r.slidesJQ[e]);n.css(r._reorderProp,(e+r._idOffset+d)*r._slideSize)}}function L(e){var t=!1;if(c){if(e>h-1)return L(e-h);if(e<0)return L(h+e)}return e}var r=this,i,s,o,u,a,f,l,c=r._loop,h=r.numSlides;if(!isNaN(n))return L(n);var p=r.currSlideId,d,v=t?Math.abs(r._prevSlideId-r.currSlideId)>=r.numSlides-1?0:1:r._numPreloadImages,m=Math.min(2,v),g=!1,y=!1,b;for(s=p;s<p+1+m;s++){b=L(s);i=r.slides[b];if(i&&(!i.isAdded||!i.positionSet)){g=!0;break}}for(s=p-1;s>p-1-m;s--){b=L(s);i=r.slides[b];if(i&&(!i.isAdded||!i.positionSet)){y=!0;break}}if(g)for(s=p;s<p+v+1;s++){b=L(s);d=Math.floor((r._realId-(p-s))/r.numSlides)*r.numSlides;i=r.slides[b];i&&N(i,b)}if(y)for(s=p-1;s>p-1-v;s--){b=L(s);d=Math.floor((r._realId-(p-s))/h)*h;i=r.slides[b];i&&N(i,b)}if(!t){var w=p,E=v,S=L(p-v),x=L(p+v),T=S>x?0:S;for(s=0;s<h;s++){if(S>x&&s>S-1)continue;if(s<T||s>x){i=r.slides[s];if(i&&i.holder){i.holder.detach();i.isAdded=!1}}}}},setItemHtml:function(t,n){function u(){if(!t.image){o(t)();return}if(!t.isLoading)a(e("<img/>"),t.image);else{var n=1;function r(e){var i=e==="big"?t.isBigLoaded:t.isMedLoaded;if(!t.isLoading)return;if(t.isLoaded){o(t)();return}if(n%50===0){var s=t.imageLoader;if(s.complete&&s.naturalWidth!==undefined&&s.naturalWidth!==0&&s.naturalHeight!==0){o(t)();return}}if(n>300)return;setTimeout(r,400);n++}r(t.sizeType)}}function a(r,i){if(!n){if(!t.isLoading){if(!i){i=r.attr("src");r=e("<img/>")}c(s);t.isLoading=!0;t.imageLoader=r;r.one("load error",o(t)).attr("src",i)}}else l()}function f(e){return e?!e.complete||e.naturalWidth===undefined||e.naturalWidth===0?!1:!0:!1}function l(){s.isWaiting=!0;c(s);s.slideId=-99}function c(e){t.holder.html(r._preloader.clone())}var r=this,i=t.content,s=t.holder,o=function(t){var i=t.sizeType;return function(s){var o=t.content,u=t.holder;if(s){var a=s.currentTarget;e(a).off("load error");if(s.type==="error"){t.isLoaded=!0;t.image="";t.isLoading=!1;o.addClass("rsSlideError");u.html(o);t.holder.trigger("rsAfterContentSet");r.ev.trigger("rsAfterContentSet",t);return}}if(t.image){if(t.bigImage&&t.sizeType!==i){i==="med"?t.isMedLoading=!1:i==="big"?t.isBigLoading=!1:t.isMedLoading=t.isLoading=!1;return}if(!t.isLoaded){var f,c;if(o.hasClass("rsImg")){c=!0;f=o}else{c=!1;f=o.find(".rsImg")}if(f.length&&f.is("a")){c?o=e('<img class="rsImg" src="'+t.image+'" />'):o.find(".rsImg").replaceWith('<img class="rsImg" src="'+t.image+'" />');t.content=o}t.iW=a.width;if(t.iW>0){t.iH=a.height;t.isLoaded=!0;t.isLoading=!1;r._resizeImage(t)}}else{if(!t.isRendered&&n){l();return}r._resizeImage(t)}}else{if(!r._preload&&n&&!t.isRendered){t.isRendered=!0;l();return}t.isLoaded=!0;t.isLoading=!1}var h=!1,p=t.id-r._newSlideId;if(!n&&!t.appendOnLoaded&&r.st.fadeinLoadedSlide&&(p===0||(h||r._isAnimating||r._isDragging)&&(p===-1||p===1))){o.css(r._vendorPref+"transition","opacity 400ms ease-in-out").css({visibility:"visible",opacity:0});u.html(o);setTimeout(function(){o.css("opacity",1)},6)}else u.html(o);t.isRendered=!0;u.find("a").off("click.rs").on("click.rs",function(e){if(r.dragSuccess)return!1;r._blockActions=!0;r.ev.trigger("rsSlideClick");setTimeout(function(){r._blockActions=!1},3)});t.holder.trigger("rsAfterContentSet");r.ev.trigger("rsAfterContentSet",t);t.appendOnLoaded&&r._addBlockToContainer(t,o,n)}};t.isLoaded?o(t)():n?l():u()},_addBlockToContainer:function(e,t,n){var r=this,i=e.holder,s=e.id-r._newSlideId,o=!1;if(r._isMove&&!n&&r.st.fadeinLoadedSlide&&(s===0||(o||r._isAnimating||r._isDragging)&&(s===-1||s===1))){var t=e.content;t.css(r._vendorPref+"transition","opacity 400ms ease-in-out").css({visibility:"visible",opacity:0});r._slidesContainer.append(i);setTimeout(function(){t.css("opacity",1)},6)}else r._slidesContainer.append(i);e.appendOnLoaded=!1},_onDragStart:function(t,n){var r=this,i,s;r.dragSuccess=!1;if(e(t.target).closest(".rsNoDrag",r._currHolder).length)return!0;if(!n&&r._isAnimating){s=!0;r._stopAnimation()}if(r._isDragging){r.hasTouch&&(r._multipleTouches=!0);return}r.hasTouch&&(r._multipleTouches=!1);r._setGrabbingCursor();if(r.hasTouch){var o=t.originalEvent.touches;if(!(o&&o.length>0))return;i=o[0];o.length>1&&(r._multipleTouches=!0)}else{i=t;t.preventDefault()}r._isDragging=!0;r._doc.on(r._moveEvent,function(e){r._onDragMove(e,n)}).on(r._upEvent,function(e){r._onDragRelease(e,n)});r._currMoveAxis="";r._hasMoved=!1;r._pageX=i.pageX;r._pageY=i.pageY;r._startPagePos=r._accelerationPos=(n?r._thumbsHorizontal:r._slidesHorizontal)?i.pageX:i.pageY;r._horDir=0;r._verDir=0;r._currRenderPosition=n?r._thumbsPosition:r._sPosition;r._startTime=(new Date).getTime();r.hasTouch&&r._sliderOverflow.on(r._cancelEvent,function(e){r._onDragRelease(e,n)})},_renderMovement:function(e,t){var n=this;if(n._checkedAxis){var r=n._renderMoveTime,i=e.pageX-n._pageX,s=e.pageY-n._pageY,o=n._currRenderPosition+i,u=n._currRenderPosition+s,a=t?n._thumbsHorizontal:n._slidesHorizontal,f=a?o:u,l=n._currMoveAxis;n._hasMoved=!0;n._pageX=e.pageX;n._pageY=e.pageY;var c=a?n._pageX:n._pageY;l==="x"&&i!==0?n._horDir=i>0?1:-1:l==="y"&&s!==0&&(n._verDir=s>0?1:-1);var h=a?i:s;if(!t){if(!n._loop){n.currSlideId<=0&&c-n._startPagePos>0&&(f=n._currRenderPosition+h*n._lastItemFriction);n.currSlideId>=n.numSlides-1&&c-n._startPagePos<0&&(f=n._currRenderPosition+h*n._lastItemFriction)}}else f>n._thumbsMinPosition?f=n._currRenderPosition+h*n._lastItemFriction:f<n._thumbsMaxPosition&&(f=n._currRenderPosition+h*n._lastItemFriction);n._currRenderPosition=f;if(r-n._startTime>200){n._startTime=r;n._accelerationPos=c}t?n._setThumbsPosition(n._currRenderPosition):n._isMove&&n._setPosition(n._currRenderPosition)}},_onDragMove:function(e,t){var n=this;if(n.hasTouch){if(n._lockAxis)return;var r=e.originalEvent.touches;if(!r)return;if(r.length>1)return;point=r[0]}else point=e;if(!n._hasMoved){n._useCSS3Transitions&&(t?n._thumbsContainer:n._slidesContainer).css(n._vendorPref+n._TD,"0s");(function o(){if(n._isDragging){n._animFrame=requestAnimationFrame(o);n._renderMoveEvent&&n._renderMovement(n._renderMoveEvent,t)}})()}if(!n._checkedAxis){var i=t?n._thumbsHorizontal:n._slidesHorizontal,s=Math.abs(point.pageX-n._pageX)-Math.abs(point.pageY-n._pageY)-(i?-7:7);if(s>7){if(i){e.preventDefault();n._currMoveAxis="x"}else if(n.hasTouch){n._completeGesture();return}n._checkedAxis=!0}else if(s<-7){if(!i){e.preventDefault();n._currMoveAxis="y"}else if(n.hasTouch){n._completeGesture();return}n._checkedAxis=!0}return}e.preventDefault();n._renderMoveTime=(new Date).getTime();n._renderMoveEvent=point},_completeGesture:function(){var e=this;e._lockAxis=!0;e._hasMoved=e._isDragging=!1;e._onDragRelease()},_onDragRelease:function(t,n){function d(e){return e<100?100:e>500?500:e}function v(e,t){if(r._isMove||n){a=(-r._realId-r._idOffset)*r._slideSize;f=Math.abs(r._sPosition-a);r._currAnimSpeed=f/t;e&&(r._currAnimSpeed+=250);r._currAnimSpeed=d(r._currAnimSpeed);r._animateTo(a,!1)}}var r=this,i,s,o,u,a,f,l,c;r.ev.trigger("rsDragRelease");r._renderMoveEvent=null;r._isDragging=!1;r._lockAxis=!1;r._checkedAxis=!1;r._renderMoveTime=0;cancelAnimationFrame(r._animFrame);r._hasMoved&&(n?r._setThumbsPosition(r._currRenderPosition):r._isMove&&r._setPosition(r._currRenderPosition));r._doc.off(r._moveEvent).off(r._upEvent);r.hasTouch&&r._sliderOverflow.off(r._cancelEvent);r._setGrabCursor();if(!r._hasMoved&&!r._multipleTouches&&n&&r._thumbsEnabled){var h=e(t.target).closest(".rsNavItem");h.length&&r.goTo(h.index());return}var p=n?r._thumbsHorizontal:r._slidesHorizontal;if(!r._hasMoved||r._currMoveAxis==="y"&&p||r._currMoveAxis==="x"&&!p)return;r.dragSuccess=!0;r._currMoveAxis="";var m=r.st.minSlideOffset,g=r.hasTouch?t.originalEvent.changedTouches[0]:t,y=p?g.pageX:g.pageY,b=r._startPagePos,w=r._accelerationPos,E=r.currSlideId,S=r.numSlides,x=p?r._horDir:r._verDir,T=r._loop,N=!1,C=0;i=Math.abs(y-b);s=y-w;o=(new Date).getTime()-r._startTime;u=Math.abs(s)/o;if(x===0||S<=1){v(!0,u);return}if(!T&&!n)if(E<=0){if(x>0){v(!0,u);return}}else if(E>=S-1&&x<0){v(!0,u);return}if(!n)if(b+m<y){if(x<0){v(!1,u);return}r._moveTo("prev",d(Math.abs(r._sPosition-(-r._realId-r._idOffset+1)*r._slideSize)/u),N,!0,!0)}else if(b-m>y){if(x>0){v(!1,u);return}r._moveTo("next",d(Math.abs(r._sPosition-(-r._realId-r._idOffset-1)*r._slideSize)/u),N,!0,!0)}else v(!1,u);else{var a=r._thumbsPosition,k;if(a>r._thumbsMinPosition)a=r._thumbsMinPosition;else if(a<r._thumbsMaxPosition)a=r._thumbsMaxPosition;else{var L=.003,A=u*u/(L*2),O=-r._thumbsPosition,M=r._thumbsContainerSize-r._thumbsViewportSize+r._thumbsPosition;if(s>0&&A>O){O+=r._thumbsViewportSize/(15/(A/u*L));u=u*O/A;A=O}else if(s<0&&A>M){M+=r._thumbsViewportSize/(15/(A/u*L));u=u*M/A;A=M}k=Math.max(Math.round(u/L),50);a+=A*(s<0?-1:1);if(a>r._thumbsMinPosition){r._animateThumbsTo(a,k,!0,r._thumbsMinPosition,200);return}if(a<r._thumbsMaxPosition){r._animateThumbsTo(a,k,!0,r._thumbsMaxPosition,200);return}}r._animateThumbsTo(a,k,!0)}},_setPosition:function(e){var t=this;e=t._sPosition=e;t._useCSS3Transitions?t._slidesContainer.css(t._xProp,t._tPref1+(t._slidesHorizontal?e+t._tPref2+0:0+t._tPref2+e)+t._tPref3):t._slidesContainer.css(t._slidesHorizontal?t._xProp:t._yProp,e)},updateSliderSize:function(e){var t=this,n,r;t.st.beforeResize&&t.st.beforeResize.call(t);if(t.st.autoScaleSlider){var i=t.st.autoScaleSliderWidth,s=t.st.autoScaleSliderHeight;if(t.st.autoScaleHeight){n=t.slider.width();if(n!=t.width){t.slider.css("height",n*(s/i));n=t.slider.width()}r=t.slider.height()}else{r=t.slider.height();if(r!=t.height){t.slider.css("width",r*(i/s));r=t.slider.height()}n=t.slider.width()}}else{n=t.slider.width();r=t.slider.height()}t._sliderOffset=t.slider.offset();t._sliderOffset=t._sliderOffset[t._reorderProp];if(e||n!=t.width||r!=t.height){t.width=n;t.height=r;t._wrapWidth=n;t._wrapHeight=r;t.ev.trigger("rsBeforeSizeSet");t._sliderOverflow.css({width:t._wrapWidth,height:t._wrapHeight});t._slideSize=(t._slidesHorizontal?t._wrapWidth:t._wrapHeight)+t.st.slidesSpacing;t._imagePadding=t.st.imageScalePadding;var o,u,a,f;for(a=0;a<t.slides.length;a++){o=t.slides[a];o.positionSet=!1;if(o&&o.image&&o.isLoaded){o.isRendered=!1;t._resizeImage(o)}}if(t._cloneHolders)for(a=0;a<t._cloneHolders.length;a++){o=t._cloneHolders[a];o.holder.css(t._reorderProp,(o.id+t._idOffset)*t._slideSize)}t._updateBlocksContent();if(t._isMove){t._useCSS3Transitions&&t._slidesContainer.css(t._vendorPref+"transition-duration","0s");t._setPosition((-t._realId-t._idOffset)*t._slideSize)}t.ev.trigger("rsOnUpdateNav");t.st.afterResize&&t.st.afterResize.call(t)}},setSlidesOrientation:function(e){},appendSlide:function(e,t){var n=this,r=n._parseNode(e);if(isNaN(t)||t>n.numSlides)t=n.numSlides;n.slides.splice(t,0,r);n.slidesJQ.splice(t,0,'<div style="'+(n._isMove?"position: absolute;":"z-index: 0; display:none; opacity: 0; position: absolute;  left: 0; top: 0;")+'" class="rsSlide"></div>');t<n.currSlideId&&n.currSlideId++;n.ev.trigger("rsOnAppendSlide",[r,t]);n._refreshSlides(t);t===n.currSlideId&&n.ev.trigger("rsAfterSlideChange")},removeSlide:function(e){var t=this,n=t.slides[e];if(n){n.holder&&n.holder.remove();e<t.currSlideId&&t.currSlideId++;t.slides.splice(e,1);t.slidesJQ.splice(e,1);t.ev.trigger("rsOnRemoveSlide",[e]);t._refreshSlides(e);e===t.currSlideId&&t.ev.trigger("rsAfterSlideChange")}},_refreshSlides:function(e){var t=this,n=t.numSlides,r=t._realId<=0?0:Math.floor(t._realId/n);t.numSlides=t.slides.length;if(t.numSlides===0){t.currSlideId=t._idOffset=t._realId=0;t.currSlide=t._oldHolder=null}else t._realId=r*t.numSlides+t.currSlideId;for(var i=0;i<t.numSlides;i++)t.slides[i].id=i;t.currSlide=t.slides[t.currSlideId];t._currHolder=t.slidesJQ[t.currSlideId];t.currSlideId>=t.numSlides?t.goTo(t.numSlides-1):t.currSlideId<0&&t.goTo(0);t._refreshNumPreloadImages();t._isMove&&t._loop&&t._slidesContainer.css(t._vendorPref+t._TD,"0ms");t._refreshSlidesTimeout&&clearTimeout(t._refreshSlidesTimeout);t._refreshSlidesTimeout=setTimeout(function(){t._setPosition((-t._realId-t._idOffset)*t._slideSize);t._updateBlocksContent()},14);t.ev.trigger("rsOnUpdateNav")},_setGrabCursor:function(){var e=this;if(!e.hasTouch&&e._isMove)if(e._grabCursor)e._sliderOverflow.css("cursor",e._grabCursor);else{e._sliderOverflow.removeClass("grabbing-cursor");e._sliderOverflow.addClass("grab-cursor")}},_setGrabbingCursor:function(){var e=this;if(!e.hasTouch&&e._isMove)if(e._grabbingCursor)e._sliderOverflow.css("cursor",e._grabbingCursor);else{e._sliderOverflow.removeClass("grab-cursor");e._sliderOverflow.addClass("grabbing-cursor")}},next:function(e){var t=this;t._moveTo("next",t.st.transitionSpeed,!0,!e)},prev:function(e){var t=this;t._moveTo("prev",t.st.transitionSpeed,!0,!e)},_moveTo:function(e,t,n,r,i){function S(e){e<0?e=s.numSlides+e:e>s.numSlides-1&&(e-=s.numSlides);return e!==s.currSlideId?!1:!0}var s=this,o,u,a;s._isVideoPlaying&&s.stopVideo();s.ev.trigger("rsBeforeMove",[e,r]);e==="next"?newItemId=s.currSlideId+1:e==="prev"?newItemId=s.currSlideId-1:newItemId=e=parseInt(e,10);if(!s._loop){if(newItemId<0){s._doBackAndForthAnim("left",!r);return}if(newItemId>=s.numSlides){s._doBackAndForthAnim("right",!r);return}}if(s._isAnimating){s._stopAnimation();n=!1}u=newItemId-s.currSlideId;s._prevSlideId=s.currSlideId;var f=s.currSlideId,l=s.currSlideId+u,c=s._realId,h,p;if(s._loop){l=s._updateBlocksContent(!1,l);c+=u}else c=l;s._newSlideId=l;s._oldHolder=s.slidesJQ[s.currSlideId];s._realId=c;s.currSlideId=s._newSlideId;s.currSlide=s.slides[s.currSlideId];s._currHolder=s.slidesJQ[s.currSlideId];var d=2,v=Boolean(u>0),m=Math.abs(u),g=Math.floor(f/s._numPreloadImages),y=Math.floor((f+(v?d:-d))/s._numPreloadImages),b=v?Math.max(g,y):Math.min(g,y),w=b*s._numPreloadImages+(v?s._numPreloadImages-1:0);w>s.numSlides-1?w=s.numSlides-1:w<0&&(w=0);var E=v?w-f:f-w;E>s._numPreloadImages&&(E=s._numPreloadImages);if(m>E+d){s._idOffset+=(m-(E+d))*(v?-1:1);t*=1.4;for(a=0;a<s.numSlides;a++)s.slides[a].positionSet=!1}s._currAnimSpeed=t;s._updateBlocksContent(!0);i||(p=!0);o=(-c-s._idOffset)*s._slideSize;if(p)setTimeout(function(){s._isWorking=!1;s._animateTo(o,e,!1,n);s.ev.trigger("rsOnUpdateNav")},0);else{s._animateTo(o,e,!1,n);s.ev.trigger("rsOnUpdateNav")}},_updateArrowsNav:function(){var e=this,t="rsArrowDisabled";if(e.st.arrowsNav){if(e.numSlides<=1){e._arrowLeft.css("display","none");e._arrowRight.css("display","none");return}e._arrowLeft.css("display","block");e._arrowRight.css("display","block");if(!e._loop&&!e.st.loopRewind){e.currSlideId===0?e._arrowLeft.addClass(t):e._arrowLeft.removeClass(t);e.currSlideId===e.numSlides-1?e._arrowRight.addClass(t):e._arrowRight.removeClass(t)}}},_animateTo:function(t,n,r,i,s){function c(){var e=a.data("rsTimeout");if(e){a!==f&&a.css({opacity:0,display:"none",zIndex:0});clearTimeout(e);a.data("rsTimeout","")}e=f.data("rsTimeout");if(e){clearTimeout(e);f.data("rsTimeout","")}}var o=this,u,a,f,l={};isNaN(o._currAnimSpeed)&&(o._currAnimSpeed=400);o._sPosition=o._currRenderPosition=t;o.ev.trigger("rsBeforeAnimStart");o.st.beforeSlideChange&&o.st.beforeSlideChange.call(o);if(!o._useCSS3Transitions)if(o._isMove){l[o._slidesHorizontal?o._xProp:o._yProp]=t+"px";o._slidesContainer.animate(l,o._currAnimSpeed,i?o.st.easeInOut:o.st.easeOut)}else{a=o._oldHolder;f=o._currHolder;f.stop(!0,!0).css({opacity:0,display:"block",zIndex:o._fadeZIndex});o._currAnimSpeed=o.st.transitionSpeed;f.animate({opacity:1},o._currAnimSpeed,o.st.easeInOut);c();a&&a.data("rsTimeout",setTimeout(function(){a.stop(!0,!0).css({opacity:0,display:"none",zIndex:0})},o._currAnimSpeed+60))}else if(o._isMove){l[o._vendorPref+o._TD]=o._currAnimSpeed+"ms";l[o._vendorPref+o._TTF]=i?e.rsCSS3Easing[o.st.easeInOut]:e.rsCSS3Easing[o.st.easeOut];o._slidesContainer.css(l);setTimeout(function(){o._setPosition(t)},o.hasTouch?5:0)}else{o._currAnimSpeed=o.st.transitionSpeed;a=o._oldHolder;f=o._currHolder;f.data("rsTimeout")&&f.css("opacity",0);c();a&&a.data("rsTimeout",setTimeout(function(){l[o._vendorPref+o._TD]="0ms";l.zIndex=0;l.display="none";a.data("rsTimeout","");a.css(l);setTimeout(function(){a.css("opacity",0)},16)},o._currAnimSpeed+60));l.display="block";l.zIndex=o._fadeZIndex;l.opacity=0;l[o._vendorPref+o._TD]="0ms";l[o._vendorPref+o._TTF]=e.rsCSS3Easing[o.st.easeInOut];f.css(l);f.data("rsTimeout",setTimeout(function(){f.css(o._vendorPref+o._TD,o._currAnimSpeed+"ms");f.data("rsTimeout",setTimeout(function(){f.css("opacity",1);f.data("rsTimeout","")},20))},20))}o._isAnimating=!0;o.loadingTimeout&&clearTimeout(o.loadingTimeout);s?o.loadingTimeout=setTimeout(function(){o.loadingTimeout=null;s.call()},o._currAnimSpeed+60):o.loadingTimeout=setTimeout(function(){o.loadingTimeout=null;o._animationComplete(n)},o._currAnimSpeed+60)},_stopAnimation:function(){var e=this;e._isAnimating=!1;clearTimeout(e.loadingTimeout);if(e._isMove)if(!e._useCSS3Transitions){e._slidesContainer.stop(!0);e._sPosition=parseInt(e._slidesContainer.css(e._xProp),10)}else{var t=e._sPosition,n=e._currRenderPosition=e._getTransformProp();e._slidesContainer.css(e._vendorPref+e._TD,"0ms");t!==n&&e._setPosition(n)}else e._fadeZIndex>20?e._fadeZIndex=10:e._fadeZIndex++},_getTransformProp:function(){var e=this,t=window.getComputedStyle(e._slidesContainer.get(0),null).getPropertyValue(e._vendorPref+"transform"),n=t.replace(/^matrix\(/i,"").split(/, |\)$/g);return parseInt(n[e._slidesHorizontal?4:5],10)},_getCSS3Prop:function(e,t){var n=this;return n._useCSS3Transitions?n._tPref1+(t?e+n._tPref2+0:0+n._tPref2+e)+n._tPref3:e},_animationComplete:function(e){var t=this;if(!t._isMove){t._currHolder.css("z-index",0);t._fadeZIndex=10}t._isAnimating=!1;t.staticSlideId=t.currSlideId;t._updateBlocksContent();t._slidesMoved=!1;t.ev.trigger("rsAfterSlideChange");t.st.afterSlideChange&&t.st.afterSlideChange.call(t)},_doBackAndForthAnim:function(e,t){var n=this,r=(-n._realId-n._idOffset)*n._slideSize;moveDist=30;if(n.numSlides===0)return;if(n.st.loopRewind){e==="left"?n.goTo(n.numSlides-1,t):n.goTo(0,t);return}if(n._isAnimating)return;if(n._isMove&&moveDist!==0){n._currAnimSpeed=200;function i(){n._isAnimating=!1}function s(){n._isAnimating=!1;n._animateTo(r,"",!1,!0,i)}n._animateTo(r+(e==="left"?moveDist:-moveDist),"",!1,!0,s)}},_resizeImage:function(e,t){var n=!0;if(e.isRendered)return;var r=e.content,i="rsImg",s,o=this,u=o.st.imageAlignCenter,a=o.st.imageScaleMode,f;if(e.videoURL){i="rsVideoContainer";if(a!=="fill")s=!0;else{f=r;f.hasClass(i)||(f=f.find("."+i));f.css({width:"100%",height:"100%"});i="rsImg"}}if(!r.hasClass(i)){n=!1;r=r.find("."+i)}var l=e.iW,c=e.iH;e.isRendered=!0;if(a==="none"&&!u)return;a!=="fill"?bMargin=o._imagePadding:bMargin=0;var h=o._wrapWidth-bMargin*2,p=o._wrapHeight-bMargin*2,d,v,m,g,y,b={};a==="fit-if-smaller"&&(l>h||c>p)&&(a="fit");if(a==="fill"||a==="fit"){d=h/l;v=p/c;a=="fill"?m=d>v?d:v:a=="fit"?m=d<v?d:v:m=1;g=Math.ceil(l*m,10);y=Math.ceil(c*m,10)}else{g=l;y=c}if(a!=="none"){b.width=g;b.height=y;s&&r.find(".rsImg").css({width:"100%",height:"100%"})}if(u){b.marginLeft=Math.floor((h-g)/2)+bMargin;b.marginTop=Math.floor((p-y)/2)+bMargin}r.css(b)}};e.rsProto=t.prototype;e.fn.royalSlider=function(n){var r=arguments;return this.each(function(){var i=e(this);if(typeof n=="object"||!n)i.data("royalSlider")||i.data("royalSlider",new t(i,n));else{var s=i.data("royalSlider");if(s&&s[n])return s[n].apply(s,Array.prototype.slice.call(r,1))}})};e.fn.royalSlider.defaults={slidesSpacing:8,startSlideId:0,loop:!1,loopRewind:!1,numImagesToPreload:4,fadeinLoadedSlide:!0,slidesOrientation:"horizontal",transitionType:"move",transitionSpeed:600,controlNavigation:"bullets",controlsInside:!0,arrowsNav:!0,arrowsNavAutoHide:!0,navigateByClick:!0,randomizeSlides:!1,sliderDrag:!0,sliderTouch:!0,keyboardNavEnabled:!1,fadeInAfterLoaded:!0,allowCSS3:!0,allowCSS3OnWebkit:!0,addActiveClass:!1,autoHeight:!1,easeOut:"easeOutSine",easeInOut:"easeInOutSine",minSlideOffset:10,imageScaleMode:"fit-if-smaller",imageAlignCenter:!0,imageScalePadding:4,autoScaleSlider:!1,autoScaleSliderWidth:800,autoScaleSliderHeight:400,autoScaleHeight:!0,arrowsNavHideOnTouch:!1,globalCaption:!1,beforeSlideChange:null,afterSlideChange:null,beforeResize:null,afterResize:null};e.rsCSS3Easing={easeOutSine:"cubic-bezier(0.390, 0.575, 0.565, 1.000)",easeInOutSine:"cubic-bezier(0.445, 0.050, 0.550, 0.950)"};e.extend(jQuery.easing,{easeInOutSine:function(e,t,n,r,i){return-r/2*(Math.cos(Math.PI*t/i)-1)+n},easeOutSine:function(e,t,n,r,i){return r*Math.sin(t/i*(Math.PI/2))+n},easeOutCubic:function(e,t,n,r,i){return r*((t=t/i-1)*t*t+1)+n}})})(jQuery);