function Lepton(e,t,n){var r=this,i="",s="&";try{r.version=localStorage.lepton_version}catch(o){r.version='"0.0.0"'}r.div=document.createElement("div");r.trace=e;r.trace&&console.log("Starting Lepton intialization");r.setParent=function(e){e.appendChild(r.div)};r.setSize=function(e,t,n){console.log("setSize("+e+","+t+","+n+")");r.width=e;r.height=t;n||(e==1024||t==1024?n=9.7:e==480||t==480?n=3.5:n=7);var i="body"+e+"x"+t+" bodyDiag"+Math.round(n-.01);console.log("CSS: "+i);document.body.setAttribute("class",i);return!0};r.exec=function(t){e&&console.log("Exec: "+t);android?jsinterface.exec(t):i=i+s+t};r.getCommands=function(){var e=i;i="";return e};r.fireEvent=function(e){e.indexOf("(")==-1?setTimeout(r.clientEvents[e],0):setTimeout(function(e){return function(){var t=e.indexOf("("),n=e.substring(0,t),i=e.substring(t+1,e.indexOf(")")).split(",");if(n=="version"){r.version=i[0].replace(/"/g,"");try{localStorage.lepton_version=r.version}catch(o){}var u=r.version.split(".");if(u[0]>2||u[0]==2&&u[1]>0)s="\n"}r.clientEvents[n].apply(r,i)}}(e),0)};r.preconditions={};r.sceneState={};r.hotspots={};r.clientEvents={measure:function(e,t,n,i,s,o,u){r.trace&&console.log("Unhandled client event: Measure: "+e+" "+t+" "+n+" "+i+" "+s+" "+o+" "+u)},hideMeasure:function(){r.trace&&console.log("Unhandled client event: Hide Measure")},scriptDone:function(){r.trace&&console.log("Unhandled client event: Script Done")},sceneStateChange:function(){r.trace&&console.log("Unhandled client event: Scene State Change")},sceneChanging:function(){r.trace&&console.log("Unhandled client event: Scene Changing")},sceneStable:function(){r.trace&&console.log("Unhandled client event: Scene Stable")},trackHotspot:function(e,t,n){r.trace&&console.log("Unhandled client event: Track Hot Spot: "+e+" "+t+" "+n)},updateAvailable:function(){r.trace&&console.log("Unhandled client event: Update available")},version:function(e){r.trace&&console.log("Unhandled client event: Version: "+e)},systemBack:function(){r.trace&&console.log("Unhandled client event: System Back")}};r.div.style.position="absolute";r.setup=function(){r.trace&&console.log("Setup: "+window.innerWidth+"x"+window.innerHeight);r.div.style.zIndex="0";r.div.style.top="0";r.div.style.left="0";r.div.style.width=window.innerWidth+"px";r.div.style.height=window.innerHeight+"px"};r.disableEvent=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1;return!1};r.trace&&console.log("Installing event listeners");r.div.addEventListener("touchstart",function(e){var t="touchstart";for(var n=0;n<e.touches.length;n++)t=t+" "+e.touches[n].screenX+" "+e.touches[n].screenY;r.exec(t);return r.disableEvent(e)});r.div.addEventListener("touchmove",function(e){var t="touchmove";for(var n=0;n<e.touches.length;n++)t=t+" "+e.touches[n].screenX+" "+e.touches[n].screenY;r.exec(t);return r.disableEvent(e)});r.div.addEventListener("touchend",function(e){var t="touchend";for(var n=0;n<e.touches.length;n++)t=t+" "+e.touches[n].screenX+" "+e.touches[n].screenY;r.exec(t);return r.disableEvent(e)});r.setEventHandler=function(e,t){r.clientEvents[e]=t;return r};r.load3DModel=function(e){r.exec("load "+e);return r};r.unload3DModel=function(){r.exec("unload");return r};r.reset=function(){r.sceneState={};r.exec("reset");return r};r.enableModes=function(e,t,n,i){r.trace&&console.log("Gesture Handlers: ["+(e?"X":" ")+"] Rotate ["+(t?"X":" ")+"] Pan ["+(n?"X":" ")+"] Zoom ["+(e?"X":" ")+"] Measure");r.exec("modes "+e+" "+t+" "+n+" "+i);return r};r.checkPreconditions=function(e){var t=r.preconditions[e];return t};r.getSceneState=function(e){var t=r.sceneState[e];return t};r.playScript=function(e){r.exec("playScript "+e);return r};r.playStartSlow=function(e){r.trace&&console.log("Play (start slow) Script "+e);r.exec("playScript "+e);return r};r.playInstantly=function(e){r.trace&&console.log("!!! not implemented: Play Instantly "+e);return r};r.jumpToTime=function(e,t){r.exec("jumpToTime "+e+" "+t);return r};r.setSequenceP=function(e,t){r.exec("setSequenceP "+e+" "+t);return r};r.setSequenceID=function(e,t){r.exec("setSequenceID "+e+" "+t);return r};r.setCamera=function(e,t,n){r.exec("setCamera "+e+" "+t+" "+n);return r};r.createHotspot=function(e,t,n,i,s,o,u,a){var f={hotspotID:e,objectID:t,x:n,y:i,z:s,radius:o,alwaysVisible:u,updateEveryFrame:a,visible:!1,screenX:0,screenY:0,screenRadius:0};r.hotspots[e]=f;r.exec("hotspot "+e+" "+t+" "+n+" "+i+" "+s+" "+o+" "+u+" "+a);return f};r.trackHotspot=function(e){r.exec("trackhotspot "+e)};r.updateHotspots=function(e){for(h in r.hotspots)r.hotspots[h].visible=e};r.mapCameraInput=function(e,t){r.exec("mapcamerainput "+e+" "+t)};r.playVideoTexture=function(e,t,n){r.exec("playvideotexture "+e+" "+t+" "+n)};r.updateHotspot=function(e,t,n,i,s){var o=r.hotspots[e];if(o!=null){o.screenX=t;o.screenY=n;o.screenRadius=i;o.visible=s}};r.updateContent=function(){r.exec("updateContent")};r.setToolbarHeight=function(e){r.exec("settoolbarheight "+e)};r.setSystemBack=function(e){r.exec("setsystemback "+e)};r.audioCreate=function(e,t){console.log("audiocreate "+e+" "+t);r.exec("audiocreate "+e+" "+t)};r.audioPlay=function(e,t){r.exec("audioplay "+e+" "+t)};r.audioPause=function(e){r.exec("audiopause "+e)};r.audioSeek=function(e,t,n){r.exec("audioseek "+e+" "+t+" "+n)};r.audioVolume=function(e,t,n){r.exec("audiovolume "+e+" "+t+" "+n)};r.audioDispose=function(e){r.exec("audiodispose "+e)};r.setup();r.trace&&console.log("Adding Lepton interaction DIV to body");document.body.appendChild(r.div);t?r.exec("bgcolor "+t):r.exec("bgcolor 0 0 0");n&&r.exec("bggrad "+n);r.exec("requestSize");r.trace&&console.log("Initialization complete");return r}if(navigator.userAgent.indexOf("Safari")==-1){console=new Object;console.log=function(e){var t=document.createElement("IFRAME");t.setAttribute("src","ios-log:#iOS#"+e);t.setAttribute("border","0");document.documentElement.appendChild(t);t.parentNode.removeChild(t);t=null};console.debug=console.log;console.info=console.log;console.warn=console.log;console.error=console.log}var android=navigator.userAgent.indexOf("Android")!=-1;console.log("lepton.js android="+android);