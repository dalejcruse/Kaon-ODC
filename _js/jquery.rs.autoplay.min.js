(function(e){e.extend(e.rsProto,{_initAutoplay:function(){var t=this,n;t._autoPlayDefaults={enabled:!1,stopAtAction:!0,pauseOnHover:!0,delay:2e3};t.st.autoPlay=e.extend({},t._autoPlayDefaults,t.st.autoPlay);if(t.st.autoPlay.enabled){t.ev.on("rsBeforeParseNode",function(t,r,i){r=e(r);n=r.attr("data-rsDelay");n&&(i.customDelay=parseInt(n,10))});t.ev.one("rsAfterInit",function(){t._setupAutoPlay()});t.ev.on("rsBeforeDestroy",function(){t.stopAutoPlay()})}},_setupAutoPlay:function(){var e=this;e.startAutoPlay();e.ev.on("rsAfterContentSet",function(t,n){!e._isDragging&&!e._isAnimating&&e._autoPlayEnabled&&n===e.currSlide&&e._play()});e.ev.on("rsDragRelease",function(){if(e._autoPlayEnabled&&e._autoPlayPaused){e._autoPlayPaused=!1;e._play()}});e.ev.on("rsAfterSlideChange",function(){if(e._autoPlayEnabled&&e._autoPlayPaused){e._autoPlayPaused=!1;e.currSlide.isLoaded&&e._play()}});e.ev.on("rsDragStart",function(){if(e._autoPlayEnabled)if(e.st.autoPlay.stopAtAction)e.stopAutoPlay();else{e._autoPlayPaused=!0;e._pause()}});e.ev.on("rsBeforeMove",function(t,n,r){if(e._autoPlayEnabled)if(r&&e.st.autoPlay.stopAtAction)e.stopAutoPlay();else{e._autoPlayPaused=!0;e._pause()}});e._pausedByVideo=!1;e.ev.on("rsVideoStop",function(){if(e._autoPlayEnabled){e._pausedByVideo=!1;e._play()}});e.ev.on("rsVideoPlay",function(){if(e._autoPlayEnabled){e._autoPlayPaused=!1;e._pause();e._pausedByVideo=!0}});if(e.st.autoPlay.pauseOnHover){e._pausedByHover=!1;e.slider.hover(function(){if(e._autoPlayEnabled){e._autoPlayPaused=!1;e._pause();e._pausedByHover=!0}},function(){if(e._autoPlayEnabled){e._pausedByHover=!1;e._play()}})}},toggleAutoplay:function(){var e=this;e._autoPlayEnabled?e.startAutoPlay():e.stopAutoPlay()},startAutoPlay:function(){var e=this;e._autoPlayEnabled=!0;e._nextPlayTime=0;e.currSlide.isLoaded&&e._play()},stopAutoPlay:function(){var e=this;e._pausedByVideo=e._pausedByHover=e._autoPlayPaused=e._autoPlayEnabled=!1;e._nextPlayTime=0;e._pause()},_nextPlayTime:0,_play:function(){var e=this,t=(new Date).getTime(),n=e._nextPlayTime==0?0:t-e._nextPlayTime;if(n>1334||n<667)n=667;var r=e.currSlide.customDelay?e.currSlide.customDelay:e.st.autoPlay.delay;console.log("timeErr: "+n);r-=n;e._nextPlayTime=t+r;if(!e._pausedByHover&&!e._pausedByVideo){e._autoPlayRunning=!0;e._autoPlayTimeout&&clearTimeout(e._autoPlayTimeout);e._autoPlayTimeout=setTimeout(function(){var t;if(!e._loop&&!e.st.loopRewind){t=!0;e.st.loopRewind=!0}e.next(!0);if(t){t=!1;e.st.loopRewind=!1}},r)}},_pause:function(){var e=this;if(!e._pausedByHover&&!e._pausedByVideo){e._autoPlayRunning=!1;if(e._autoPlayTimeout){clearTimeout(e._autoPlayTimeout);e._autoPlayTimeout=null}}}});e.rsModules.autoplay=e.rsProto._initAutoplay})(jQuery);